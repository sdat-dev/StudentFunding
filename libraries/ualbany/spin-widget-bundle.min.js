(function(n){function r(n){function o(n,t,i){if(n!=null){var r=t=="int"?parseInt(n):parseFloat(n);return r<i&&(i=r),i}return i}function s(n,t,i){if(n!=null){var r=t=="int"?parseInt(n):parseFloat(n);return r>i&&(i=r),i}return i}function h(n,t){if(n!=null){var i=new Date(n);return i<t&&(t=i),t}return t}function c(n,t){if(n!=null){var i=new Date(n);return i>t&&(t=i),t}return t}var i=n.type,r=n.field,l=n.func,u=n.el,t={},f=r!=undefined,e=f?u[0][r]:u[0];return t=i=="date"?new Date(e):e,u.each(function(){var n=f?this[r]:this;t=l=="min"?i=="date"?h(n,t):o(n,i,t):i=="date"?c(n,t):s(n,i,t)}),t}var t,i;n.fn.tagname=function(){return this.prop("tagName").toLowerCase()};n.fn.aria=function(t){var i=n(this),r="aria-"+t;return i.attr(r)};n.fn.clear=function(){this.each(function(){var t=this.tagName.toLowerCase();switch(t){case"input":case"select":case"textarea":n(this).val("");break;case"div":case"span":n(this).text("")}})};n.fn.check=function(){var t=!0,i=!1;return arguments.length==1&&(t=arguments[0]),arguments.length>1&&(t=arguments[0],i=arguments[1]),this.each(function(){(n(this).is("input:checkbox")||n(this).is("input:radio"))&&(this.checked=t,i&&n(this).trigger("click"))})};n.fn.uncheck=function(){return this.each(function(){(n(this).is("input:checkbox")||n(this).is("input:radio"))&&(this.checked=!1)})};n.fn.disable=function(){return this.each(function(){this.disabled=!0})};n.fn.enable=function(){var n=!0;return arguments.length>0&&(n=arguments[0]),this.each(function(){this.disabled=!n})};n.querystring=function(){var n=document.location.search;return n.length>0?n.substring(1):""};t={};n.querystring.item=function(i){var r=n.querystring();return n.isEmptyObject(t)&&n.each(r.split(/&/),function(){var n=this.split(/=/);t[n[0]]=n[1]}),t[i]};n.querystring.remove=function(t,i){if(t!=undefined&&i!=undefined&&t.length!=0&&i.length!=0){var r=i.indexOf("?"),f=i.length-r,e=i.substr(0,r),o=i.substr(r+1,f),u=[];return n.each(o.split("&"),function(){var n=this,i=n.split("=");i[0].toLowerCase()!=t.toLowerCase()&&u.push(n)}),e+"?"+u.join("&")}};n.cookie=function(n){n.name!=undefined&&(document.cookie=n.name+"="+n.value+"; path="+n.path)};n.cookie.read=function(t){var i=document.cookie,r,u;return i.length===0?"":(r=i.split(/;\s?/g),u=n.map(r,function(n){var t=n.split(/=/g),i=t[0],r=t[1];return{key:i,value:r}}),n.grep(u,function(n){return n.key==t})[0].value)};i={unselectable:function(){return this.each(function(){n(this).is(":radio")&&n(this).click(function(){var t=n(this).attr("previousValue"),i=n(this).attr("name");t=="checked"?(n(this).removeAttr("checked"),n(this).attr("previousValue",!1)):(n("input[name="+i+"]:radio").attr("previousValue",!1),n(this).attr("previousValue","checked"))})})},group:function(){var t=this;return this.each(function(){var i=n(this);i.is(":radio")&&i.click(function(){t.each(function(){n(this).attr("id")!==i.attr("id")&&(this.checked=!1)})})})}};n.fn.radiohelper=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.tooltip");else return i.init.apply(this,arguments)};n.fn.min=function(n){return n.func="min",n.el=this,r(n)};n.fn.max=function(n){return n.func="max",n.el=this,r(n)};n.fn.sum=function(){var i=arguments.length>0?arguments[0]:"int",t=null;return this.each(function(){var r=n(this).val().replace(/[^\-\d\.]/g,"");if(r==="")return!0;if(isNaN(r))return t="Field contains an invalid value",this.focus(),!1;t+=i==="float"?parseFloat(r):parseInt(r)}),t===null?"":t};n.fn.avg=function(t){var i,r;return t=t||{},t.type=t.type||"int",t.skipEmpty=t.skipEmpty||!1,i=t.skipEmpty?n(this).filter(function(){return n(this).val()!==""}):this,r=i.sum(t.type),isNaN(r)?"Field contains an invalid value":t.type==="int"?parseInt(r/i.length):r/i.length};n.grepsingle=function(n,t,i){for(var r=0;r<n.length;r++)if(!t(n[r],r)!=!i)return n[r];return undefined};n.grepjoin=function(t,i,r,u){for(var f,o=[],e=0;e<t.length;e++)for(f=0;f<i.length;f++)!r(t[e],i[f])!=!u&&o.push(n.extend(!0,t[e],i[f]));return o}})(jQuery),function(n){var i='<div id="next" class="default prev-next" data-position="{2}">Next [{0}-{1}]>><\/div>',r='<div id="prev" class="default prev-next" data-position="{2}"><< Prev [{0}-{1}]<\/div>',u='<div style="font-size:0.9em" id="recordsFound">Records found: <span style="font-weight:bold;">{0}<\/span>. <span>Displaying page <span style="font-weight:bold">{1}<\/span> of <span style="font-weight:bold">{2}<\/span><\/span><\/div>',f='<ul id="pages"><\/ul>',t;String.prototype.superReplacement=function(){var n=this.toString();if(arguments.length>0)for(x=0;x<arguments.length;x++)n=n.replace(new RegExp("\\{"+x+"\\}","gi"),arguments[x]);return n};t={parsePaging:function(n,i){var r=t.runThrough,o,e,s;n.find("#recordsFound").remove();n.find("#pages").remove();o=u.superReplacement(i.RecordCount,i.PageNumber,i.PageCount);n.append(o,f);i.PagePosition===1?i.PageCount<11?r(!1,!1,i.PagePosition,1,i.PageCount,i.PageCount,n):r(!1,!0,i.PagePosition,1,10,i.PageCount,n):(e=(i.PagePosition-1)*10+1,s=(i.PagePosition-1)*10+10,i.PageCount<(i.PagePosition-1)*10+10?r(!0,!1,i.PagePosition,e,i.PageCount,i.PageCount,n):r(!0,!0,i.PagePosition,e,s,i.PageCount,n));n.find("li").removeClass("big").addClass("default");n.find("#page"+i.PageNumber).addClass("big").removeClass("default");n.data("pageNumber",i.PageNumber)},cleanPager:function(n){n.find("#pages li").length>0&&n.find("#pages li").remove();n.find("#next").length>0&&n.find("#next").remove();n.find("#prev").length>0&&n.find("#prev").remove()},runThrough:function(n,u,f,e,o,s,h){var l,c;for(t.cleanPager(h),n&&(l=r.superReplacement(e-10,e-1,f-1),h.find("#pages").before(l)),c="",pg=e;pg<=o;pg++)c+='<li id="page{0}" class="default pager-li" data-page="{0}" style="vertical-align:top">{0}<\/li>'.superReplacement(pg);if(h.find("#pages").append(c),u){var a=f*10+1,v=s<f*10+10?s:f*10+10,y=i.superReplacement(a,v,f+1);h.find("#pages").after(y)}}};n.fn.pager=function(i){var u=n(this),r=n.extend({},{PageNumber:1,PageCount:1,PagePosition:1,RecordCount:1,appendTo:null,callback:null,rendered:!1,showResults:!0},i),f=t.parsePaging;f(u,r);u.on("click","#pages li",function(){r.PageNumber=n(this).data("page");f(u,r);r.callback({options:r})}).on("click","div.prev-next",function(t){var i=n(t.target),e=n(i).data("position");r.PagePosition=e;f(u,r)})}}(jQuery),function(n){var i="",r="",t={},u='<div class="search-rounder">  <label>      Search: <input type="text" size="100" name="keywords" id="keywords" />  <\/label>  <label>      Results per page:      <select size="1" id="pageSize" name="PageSize">          <option value="10">10<\/option>          <option value="25">25<\/option>          <option value="50">50<\/option>          <option value="75">75<\/option>          <option value="100">100<\/option>          <option value="-1">ALL<\/option>      <\/select>  <\/label>  <div>      <input type="button" id="btnSubmit" value="Submit" class="left-15" />  <\/div><\/div>',o='\t\t<div id="waiter" style="display:none;position:absolute;background:blue;opacity:0.3;z-index:60000;">\t<div style="width:100%;text-align:center;margin-top:10px;">\t\t<img src="/assets/images/loader.gif" />\t<\/div><\/div > <div id="results" style="margin-top:10px;">     <div id="topPager" style="display:inline-block"><\/div>\t\t<div id="spin-contents">     <table id="resultsTable" style="display:none">         <tr>             <td class="header" style="border:solid black 1px;width:5%">SPIN ID<\/td>             <td class="header" style="border:solid black 1px;width:35%">Opportunity Title<\/td>             <td class="header" style="border:solid black 1px;width:30%">Sponsor Name<\/td>             <td class="header" style="border:solid black 1px;width:10%">Sponsor Number<\/td>             <td class="header" style="border:solid black 1px;width:10%">Deadline Date<\/td>             <td class="header" style="border:solid black 1px;width:10%">Funding Amount<\/td>         <\/tr>     <\/table>\t\t<\/div>     <div id="bottomPager"><\/div> <\/div>',s=function(i){var r=i.options.keywords!==null?i.options.keywords:n("#keywords").val(),u=i.options.pageSize!==null?i.options.pageSize:n('input[name="PageSize"]:checked, select[name="PageSize"]').val();return{keywords:r,pageSize:u,pageNumber:i.page,uniqueId:t.uniqueId,PublicKey:t.PublicKey,InstCode:t.InstCode,signature:t.signature,callback:t.callback,responseFormat:t.responseFormat,isCrossDomain:t.isCrossDomain,columns:t.columns}},h=function(){if(t.showSpinner&&t.showResults){var r=n("#spin-contents").position().top,u=n("#spin-contents").position().left,i=n("#spin-contents").height(),f=n("#spin-contents").width();i==0&&(i=200);n("#waiter").css({top:r+"px",left:u+"px",height:i+"px",width:f+"px"}).show()}},c=function(){n("#resultsTable").hide();n("#resultsTable").find("tr:gt(0)").remove();n("#topPager, #bottomPager").html("")},f,e;n.fn.SPINWidget=function(f){return this.each(function(){var s=this,e=n(this);t=n.extend({},{url:"https://spin.infoedglobal.com",useDefaultTemplate:!0,liveLink:!1,callback:"parsePrograms",responseFormat:"JSON",isCrossDomain:!0,showSpinner:!0,pagerType:"InfoEd",showSearch:!0,showResults:!0,keywords:null,pageSize:null,resultsTable:{rowColor:"#ffffff",altRowColor:"#f0f0f0"}},f);t.useDefaultTemplate||(u=t.template.html());t.showSearch&&e.append(u);t.showResults&&e.append(o);delete t.template;r=t.url;i=t.url+"/Service/ProgramSearch";n("#btnSubmit").click(function(i){i.preventDefault();c();n("#topPager, #bottomPager").html("");n.fn.SPINWidget.submitSearch.call(e,{options:t,page:1})})})};n.fn.SPINWidget.setPager=function(i){var r=n("#topPager");r.html().length===0&&n("#topPager, #bottomPager").pager({PageCount:i.NumberOfPages,PageNumber:i.PageNumber,PagePosition:i.PagePosition,PageSize:i.PageSize,RecordCount:i.TotalNumberOfPrograms,pagerType:i.PagerType,callback:function(i){n.fn.SPINWidget.submitSearch.call(this,{options:t,page:i.options.PageNumber})}})};n.fn.SPINWidget.submitSearch=function(t){n.SubmitSPINSearch(t)};f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e=function(n,t){if(t===null)return n?'<span style="font-style:italic">Continuous Submission<\/span>':'<span style="font-style:italic">None Posted<\/span>';var i=t.match(/(\d{4})-(\d{2})-(\d{2})/);return i!=null?t=i[3]+"-"+f[parseInt(i[2])]+"-"+i[1]:(i=t.match(/(\d{2})-(\w{3})-(\d{4})/),i==null&&(t="")),t};n.SubmitSPINSearch=function(r){n.isEmptyObject(t)&&(t=r.options,t.responseFormat="JSON",t.isCrossDomain=!0,i="https://spin.infoedglobal.com/Service/ProgramSearch");var u=s.call(this,r);h();n.ajax({url:i,data:u,type:"GET",dataType:"jsonp",jsonp:r.options.callback})};n.Parse=function(i){var f,u;if(n("#waiter").hide(),i.ErrorType){alert(i.ErrorType+"\n\n"+i.ErrorMessage);return}if(i.TotalNumberOfPrograms===0){alert("There are no programs returned that match the input criteria");return}n.fn.SPINWidget.setPager(i);f=i.Programs;n("#resultsTable").find("tr:gt(0)").remove();u="";n(f).each(function(){var n=this.id;t.liveLink&&(n='<a href="'+r+"/Program/Detail/"+n+'" target="_new">'+n+"<\/a>");u+='<tr style="background-color:'+t.resultsTable.rowColor+'"><td class="border-black padded-10">'+n+'<\/td><td class="border-black padded-10">'+this.prog_title+'<\/td><td class="border-black padded-10">'+this.spon_name+'<\/td><td class="border-black padded-10">'+(this.spon_prog!==null?this.spon_prog:"")+'<\/td><td class="border-black padded-10">'+e(this.dd_open,this.NextDeadlineDate)+'<\/td><td class="border-black padded-10">'+(this.total_funding_amount>0?this.total_funding_amount+" "+this.DisplayCurrency:'<span style="font-style:italic">Not Specified<\/span>')+"<\/td><\/tr>"});n("#resultsTable").append(u);n("#resultsTable").find("tr:gt(0):odd").css("background-color",t.resultsTable.altRowColor);n("#resultsTable").show()}}(jQuery)
//# sourceMappingURL=spin-widget-bundle.min.js.map
